"use strict";(self.webpackChunkpet_foundation=self.webpackChunkpet_foundation||[]).push([[860],{7860:(e,a,s)=>{s.r(a),s.d(a,{default:()=>p});var t=s(5043),n=(s(8893),s(2342),s(7555)),o=s(7402),c=s(6213),r=s(1036),i=s(9555);class l extends Error{}function d(e){let a=e.replace(/-/g,"+").replace(/_/g,"/");switch(a.length%4){case 0:break;case 2:a+="==";break;case 3:a+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,((e,a)=>{let s=a.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s})))}(a)}catch(s){return atob(a)}}l.prototype.name="InvalidTokenError";var h=s(579);const p=e=>{let{loginModal:a,setShowLoginModal:s,setShowRegisterModal:p}=e;const{setUser:m}=(0,t.useContext)(i.R),[u,f]=(0,t.useState)({email:"",password:""}),g=e=>{const{name:a,value:s}=e.target;f((e=>({...e,[a]:s})))};return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",{className:"modal-background ".concat(a?"show":""),children:(0,h.jsxs)("div",{className:"modal-content",children:[(0,h.jsx)("span",{className:"close-button",onClick:()=>s(!1),children:"\xd7"}),(0,h.jsx)("h2",{children:"Sign In"}),(0,h.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await c.A.post("http://localhost:8081/api/user/login",u);r.oR.success("Login successful!");const a=e.data.token;sessionStorage.setItem("token",a),localStorage.removeItem("token");const t=function(e,a){if("string"!==typeof e)throw new l("Invalid token specified: must be a string");a||(a={});const s=!0===a.header?0:1,t=e.split(".")[s];if("string"!==typeof t)throw new l("Invalid token specified: missing part #".concat(s+1));let n;try{n=d(t)}catch(o){throw new l("Invalid token specified: invalid base64 for part #".concat(s+1," (").concat(o.message,")"))}try{return JSON.parse(n)}catch(o){throw new l("Invalid token specified: invalid json for part #".concat(s+1," (").concat(o.message,")"))}}(a);m({id:t.id,name:t.name,email:t.email}),s(!1)}catch(a){r.oR.error("Login failed. Please check your email and password.")}},children:[(0,h.jsxs)("div",{className:"Input-fields",children:[(0,h.jsxs)("div",{className:"field1",children:[(0,h.jsx)("div",{className:"form-icon",children:(0,h.jsx)(o.A,{className:"icon1"})}),(0,h.jsx)("input",{type:"text",name:"email",value:u.email,onChange:g,placeholder:"Email Address",required:!0})]}),(0,h.jsxs)("div",{className:"field1",children:[(0,h.jsx)("div",{className:"form-icon",children:(0,h.jsx)(n.A,{className:"icon1"})}),(0,h.jsx)("input",{type:"password",name:"password",value:u.password,onChange:g,placeholder:"Password",required:!0})]})]}),(0,h.jsx)("button",{type:"submit",className:"submit-btn",children:"Sign In"})]}),(0,h.jsxs)("p",{children:["Don't have an account? ",(0,h.jsx)("span",{onClick:()=>{s(!1),p(!0)},children:"Sign Up"})]})]})})})}},7402:(e,a,s)=>{var t=s(4994);a.A=void 0;var n=t(s(39)),o=s(579);a.A=(0,n.default)((0,o.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"}),"Email")},7555:(e,a,s)=>{var t=s(4994);a.A=void 0;var n=t(s(39)),o=s(579);a.A=(0,n.default)((0,o.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1z"}),"Lock")},8893:()=>{}}]);
//# sourceMappingURL=860.6e2be449.chunk.js.map
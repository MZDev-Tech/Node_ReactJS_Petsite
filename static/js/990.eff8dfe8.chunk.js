"use strict";(self.webpackChunkpet_foundation=self.webpackChunkpet_foundation||[]).push([[990],{4990:(t,a,e)=>{e.r(a),e.d(a,{default:()=>i});var s=e(5043),o=e(3216),n=e(6213),c=e(1036),r=e(579);const i=()=>{const t=(0,o.zy)(),a=(0,o.Zp)(),e=new URLSearchParams(t.search).get("session_id"),[i,d]=(0,s.useState)(null);(0,s.useEffect)((()=>{e&&(async()=>{try{const{data:t}=await n.A.get("http://localhost:8081/api/adoption/get-session/".concat(e));if(t&&t.metadata&&t.metadata.adoptionData){const a=JSON.parse(t.metadata.adoptionData),e=await n.A.post("http://localhost:8081/api/adoption/add",{adoptionData:a,payment_id:t.payment_intent,payment_amount:t.amount_total/100});200===e.status&&(c.oR.success("Adoption request sent successfully"),l(e.data.orderNumber))}else c.oR.error("Unable to send adoption request...")}catch(t){console.error("Error saving adoption data",t)}})()}),[e]);const l=async t=>{try{const a=await n.A.get("http://localhost:8081/api/adoption/get/".concat(t));console.log("Adoption data fetch successful for order:",t),d(a.data)}catch(a){console.log(a)}};return(0,r.jsx)("section",{className:"sec-container success-page",children:(0,r.jsxs)("div",{className:"success-data",children:[(0,r.jsx)("h2",{children:"Thank You For making Pet Adoption"}),i?(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"thank-mesg",children:["Hi ",i.user,", Your payment sent successfully"]}),(0,r.jsxs)("p",{children:["Your order no. is ",i.orderNumber]})]}):(0,r.jsx)("p",{children:"No adoption data available."}),(0,r.jsx)("button",{type:"button",className:"btn btn-info m-3 btn-back",onClick:()=>{sessionStorage.removeItem("token"),a("/pets")},children:"Go Back"})]})})}}}]);
//# sourceMappingURL=990.eff8dfe8.chunk.js.map